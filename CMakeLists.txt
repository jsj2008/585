cmake_minimum_required(VERSION 2.8)
PROJECT(585)

add_definitions(-W -Wall -ansi -pedantic -g)

#our own Find packages
#set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/CMakeModules/")

FILE(GLOB RENDERER_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/Renderer/*.cpp)
FILE(GLOB RENDERER_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/Renderer/*.h)
FILE(GLOB PHYSICS_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/Physics/*.cpp)
FILE(GLOB PHYSICS_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/Physics/*.h)
FILE(GLOB COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/Common/*.cpp)
FILE(GLOB COMMON_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/Common/*.h)
FILE(GLOB MAIN_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/Main/*.cpp)
FILE(GLOB MAIN_HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/Main/*.h)

set(SOURCES ${MAIN_SOURCES} ${RENDERER_SOURCES} ${PHYSICS_SOURCES} ${COMMON_SOURCES} main.cpp)
set(HEADERS ${MAIN_HEADERS} ${RENDERER_HEADERS} ${PHYSICS_HEADERS} ${COMMON_HEADERS})

# QT
find_package(Qt4 COMPONENTS QtCore QtGui QtOpenGL REQUIRED)
QT4_WRAP_CPP(HEADERS_MOC ${HEADERS})
include(${QT_USE_FILE})
ADD_DEFINITIONS(${QT_DEFINITIONS})

#OpenGL
find_package(OpenGL)
include_directories(${OPENGL_INCLUDE_DIR} ${CMAKE_CURRENT_SOURCE_DIR})


#bullet
set(BULLET_ROOT /usr/local/)
find_package(Bullet REQUIRED)

#set(BULLET_LIBRARIES BULLET_BulletDynamics_LIBRARY BULLET_BulletCollision_LIBRARY BULLET_LinearMath_LIBRARY)

include_directories(${BULLET_INCLUDE_DIR})
#set(BULLET_LIBRARIES libBulletDynamics.a libBulletCollision.a libLinearMath.a )
#include_directories(/usr/local/include/bullet/)
#link_directories(/usr/local/lib)

ADD_EXECUTABLE(game ${SOURCES} ${HEADERS_MOC})
TARGET_LINK_LIBRARIES(game ${QT_LIBRARIES} ${OPENGL_LIBRARIES} ${BULLET_LIBRARIES})
